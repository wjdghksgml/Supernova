<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8" />
	<title>ë…¸íŠ¸ë¶ ëŒ€ì—¬ ì‹ ì²­</title>
	<link rel="stylesheet" href="/public/borrow_styles.css" />
	<link rel="icon" type="image/x-icon" href="/public/favicon.png" />
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
	<%- include("header.ejs") %>

	<div class="form-wrapper">
		<div class="form-box">
			<div class="icon">ğŸ’»</div>
			<h2>ëŒ€ì—¬ ì‹ ì²­</h2>
			<form action="/borrow" method="POST">
				<input type="text" name="name" placeholder="ì´ë¦„" value="<%= name %>" />
				<input type="text" name="studentId" placeholder="í•™ë²ˆ" value="<%= studentId %>" />
				<input type="email" name="email" placeholder="ì´ë©”ì¼" value="<%= email %>" />
				<input type="date" name="date" id="date" />
				<div id="forTime">
					<select id="time" name="timeSlot" title="ìˆ˜ë ¹ ì‹œê°„">
						<option value="" disabled selected>-- ìˆ˜ë ¹ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš” --</option>
						<option value="ì˜¤ì „">ì˜¤í”„ë‹ ì „ (8:25~35)</option>
						<option value="ì˜¤í›„">ì ì‹¬ì‹œê°„ (12:50~1:00)</option>
					</select>
				</div>
				<button type="submit">ì‹ ì²­í•˜ê¸°</button>
			</form>
		</div>
	</div>

	<%- include("footer.ejs") %>

	<script>
		// ì˜¤ëŠ˜ ë‚ ì§œë¥¼ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
		function getTodayDate() {
			const today = new Date();
			const year = today.getFullYear();
			const month = String(today.getMonth() + 1).padStart(2, '0');
			const day = String(today.getDate()).padStart(2, '0');
			return `${year}-${month}-${day}`;
		}

		// í˜ì´ì§€ ë¡œë”© ì‹œ ì˜¤ëŠ˜ ì´ì „ ë‚ ì§œ ì„ íƒ ë¶ˆê°€ ì„¤ì •
		document.addEventListener("DOMContentLoaded", function () {
			const dateInput = document.getElementById("date");
			dateInput.min = getTommorowDate();
		});

		// ìœ íš¨ì„± ê²€ì‚¬
		document.querySelector("form").addEventListener("submit", function (e) {
			const name = document.querySelector('input[name="name"]').value.trim();
			const studentId = document.querySelector('input[name="studentId"]').value.trim();
			const email = document.querySelector('input[name="email"]').value.trim();
			const date = document.querySelector('input[name="date"]').value;
			const timeSlot = document.querySelector('select[name="timeSlot"]').value;

			if (!name || !studentId || !email || !date || !timeSlot) {
				e.preventDefault();
				Swal.fire({
					icon: "error",
					title: "WARNING!",
					text: "ëª¨ë“  í•­ëª©ì„ ë¹ ì§ì—†ì´ ì…ë ¥í•´ì£¼ì„¸ìš”.",
				});
			}
		});
	</script>
</body>
</html>

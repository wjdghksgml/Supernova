<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>회원가입</title>
		<link rel="stylesheet" href="/public/login_styles.css" />
		<link rel="icon" type="image/x-icon" href="/public/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	</head>
	<body>
		<div class="title">
			<h1>HAVEN CHRISTIAN SCHOOL</h1>
			<h2>Academic Team</h2>
		</div>

		<div class="login-box">
			<a class="icon" href="/" style="text-decoration: none">αω</a>
			<h2>Register</h2>
			<% if (error) { %>
			<p style="color: red; text-align: center"><%= error %></p>
			<% } %>
			<form action="/register" method="POST" id="registerForm">
				<input type="text" name="name" placeholder="이름" />
				<input type="number" name="studentId" placeholder="학번" />
				<input type="password" name="password" placeholder="비밀번호" />
				<input type="password" name="passwordConfirm" placeholder="비밀번호 확인" />
				<input type="email" name="email" placeholder="이메일" />
				<button type="submit">회원가입</button>
			</form>
			<div class="bottom-text">이미 계정이 있으신가요? <a href="/login">로그인</a></div>
		</div>

		<%-include("footer.ejs") %>

		<div class="wave-container">
			<svg class="wave" viewBox="0 0 1440 320" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
				<defs>
					<linearGradient id="waveGradient" x1="0%" y1="0%" x2="0%" y2="100%">
						<stop offset="0%" stop-color="rgba(212, 185, 233, 0.6)" />
						<stop offset="100%" stop-color="rgba(205, 134, 255, 0.6)" />
					</linearGradient>
				</defs>
				<path fill="url(#waveGradient)" fill-opacity="1" d="M0,250 C300,400 1140,0 1440,300 L1440,0 L0,0 Z"></path>
			</svg>
		</div>
	</body>
	<script>
		document.getElementById("registerForm").addEventListener("submit", function (e) {
			const name = document.querySelector('input[name="name"]').value.trim();
			const studentId = document.querySelector('input[name="studentId"]').value.trim();
			const password = document.querySelector('input[name="password"]').value.trim();
			const passwordConfirm = document.querySelector('input[name="passwordConfirm"]').value.trim();
			const email = document.querySelector('input[name="email"]').value.trim();

			if (!name || !studentId || !password || !passwordConfirm || !email) {
				e.preventDefault();
				Swal.fire({
					icon: "warning",
					title: "입력 오류",
					text: "모든 항목을 입력해주세요.",
				});
				return;
			}

			if (password !== passwordConfirm) {
				e.preventDefault();
				Swal.fire({
					icon: "error",
					title: "비밀번호 불일치",
					text: "비밀번호와 비밀번호 확인이 서로 다릅니다.",
				});
				return;
			}
		});
	</script>
</html>
